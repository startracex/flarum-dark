(()=>{var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";e.r(t),e.d(t,{assetsURL:()=>f,mediaPreferences:()=>s,preferTheme:()=>i,setStyle:()=>p,updateTheme:()=>h,userPreferences:()=>d});var n="startracex-flarum-dark",o=n+"-change",r=function(e){return e.AUTO="auto",e.LIGHT="light",e.DARK="dark",e}({}),a="Theme",c=Object.values(r);const u=flarum.core.compat["common/app"];var l=e.n(u),s=function(){return null!=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?r.DARK:r.LIGHT},d=function(){var e;return(null==(e=l().session)||null==(e=e.user)||null==(e=e.preferences())?void 0:e[n])||localStorage.getItem(a)},i=function(){var e=d();return e&&e!==r.AUTO?e:s()},f=function(e){return n+".assets."+e},p=function(e){e===r.AUTO&&(e=s());var t=document.querySelector("link.theme-mode-link");t||((t=document.createElement("link")).rel="stylesheet",t.classList.add("theme-mode-link"),document.head.appendChild(t)),t.href=l().data[f(e)];var n=document.querySelector('meta[name="color-scheme"]');if(n)n.content=e;else{var o=document.createElement("meta");o.name="color-scheme",o.content=e,document.head.appendChild(o)}document.documentElement.setAttribute("data-theme",e)},h=function(e,t){var r;localStorage.setItem(a,e),document.dispatchEvent(new CustomEvent(o,{detail:e})),t?t.savePreferences((r={},r[n]=e,r)).then((function(){p(e)})):p(e)};const v=flarum.core.compat["forum/app"];var y=e.n(v);const g=flarum.core.compat["common/extend"],T=flarum.core.compat["forum/components/HeaderSecondary"];var b=e.n(T);const O=flarum.core.compat["common/components/Button"];var S=e.n(O);const k=flarum.core.compat["common/components/Page"];var P=e.n(k);(0,g.extend)(P().prototype,"oninit",(function(){(0,g.extend)(b().prototype,"items",(function(e){var t,o=null==(t=y().session)?void 0:t.user,a=d()||s(),u=y().translator.trans(n+".forum.header.toggle");e.add("theme",m(S(),{className:"Button Button--flat",onclick:function(){h(function(e){if(!e)return r.LIGHT;var t=c.indexOf(e);return c[(t+1)%c.length]}(a),o)},icon:a===r.AUTO?"fa fa-adjust":a===r.LIGHT?"fa fa-sun":"fa fa-moon","aria-label":u},u),11)})),p(i())}))})(),module.exports=t})();
//# sourceMappingURL=forum.js.map